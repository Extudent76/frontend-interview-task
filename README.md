# A/B Test Chart - Интерактивная визуализация

Интерактивное веб-приложение для визуализации статистики A/B тестирования с помощью линейных графиков. Приложение позволяет анализировать конверсионные показатели различных вариаций теста, переключаться между временными диапазонами и настраивать отображение данных.

## Содержание

- [Функционал](#-функционал)
- [Технологический стек](#-технологический-стек)
- [Архитектура проекта](#-архитектура-проекта)
- [Установка и запуск](#-установка-и-запуск)
- [Сборка и деплой](#-сборка-и-деплой)
- [Структура данных](#-структура-данных)
- [Компоненты](#-компоненты)

## Функционал

### Основные возможности

1. **Интерактивный график конверсии**
   - Линейный график с отображением conversion rate (%) для каждой вариации
   - Автоматическое масштабирование осей на основе видимых данных
   - Плавная анимация при изменении данных

2. **Выбор вариаций**
   - Выпадающий список для выбора конкретной вариации
   - Опция "Все вариации" для одновременного отображения всех линий
   - Цветовая дифференциация вариаций:
     - Original (0): Синий (#8884d8)
     - Variation A (10001): Зеленый (#82ca9d)
     - Variation B (10002): Желтый (#ffc658)
     - Variation C (10003): Красный (#ff7c7c)

3. **Временные диапазоны**
   - **День**: Отображение данных по дням
   - **Неделя**: Агрегация данных по неделям с суммированием visits и conversions

4. **Типы линий**
   - Плавная (Monotone) - по умолчанию
   - Линейная (Linear)
   - Ступенчатая (Step)
   - Ступень до (Step Before)
   - Ступень после (Step After)
   - Базисная (Basis)
   - Естественная (Natural)

5. **Темы оформления**
   - Светлая тема (Day)
   - Темная тема (Night)
   - Автоматическое применение темы ко всему приложению

6. **Интерактивные подсказки (Tooltips)**
   - Отображение при наведении курсора на график
   - Вертикальная линия-индикатор позиции
   - Детальная информация для каждой вариации:
     - Дата
     - Количество визитов (Visits)
     - Количество конверсий (Conversions)
     - Процент конверсии (Rate)

7. **Адаптивный дизайн**
   - Полная поддержка экранов от 320px до 1300px+
   - Оптимизированные media queries для диапазона 671-1300px
   - Адаптивные размеры шрифтов и элементов управления
   - Responsive график с автоматической подстройкой размеров

8. **Доступность (Accessibility)**
   - ARIA-атрибуты для всех интерактивных элементов
   - Поддержка клавиатурной навигации
   - Минимальные размеры кликабельных областей (44x44px по WCAG)
   - Семантическая разметка HTML

## Технологический стек

### Frontend Framework
- **React 19.2.0** - Библиотека для построения пользовательских интерфейсов
- **TypeScript 5.9.3** - Типизированный JavaScript для повышения надежности кода

### Визуализация данных
- **Recharts 3.4.1** - Библиотека для создания графиков на основе React и D3
  - Декларативный API
  - Встроенная поддержка responsive дизайна
  - Богатая кастомизация компонентов

### Стилизация
- **CSS Modules** - Изолированные стили для каждого компонента
- **CSS Variables** - Для поддержки тем (light/dark)
- **Media Queries** - Адаптивный дизайн

### Инструменты разработки
- **Vite 7.2.2** - Быстрый сборщик и dev-сервер
- **ESLint 9.39.1** - Линтер для проверки качества кода
- **TypeScript ESLint** - Правила линтинга для TypeScript

### Деплой
- **gh-pages 6.3.0** - Автоматический деплой на GitHub Pages

## Архитектура проекта

### Структура директорий

```
ab-test-chart/
├── public/
│   ├── data.json              # Данные A/B тестов
│   └── vite.svg               # Иконка
├── src/
│   ├── components/            # React компоненты
│   │   ├── App.tsx           # Корневой компонент
│   │   ├── ChartContainer.tsx # Контейнер графика
│   │   ├── Dropdown.tsx      # Выпадающий список
│   │   └── ThemeToggle.tsx   # Переключатель темы
│   ├── styles/               # CSS Modules
│   │   ├── App.module.css
│   │   ├── ChartContainer.module.css
│   │   ├── Dropdown.module.css
│   │   └── ThemeToggle.module.css
│   ├── utils/                # Утилиты
│   │   ├── calculations.ts   # Расчет конверсии
│   │   └── dataProcessing.ts # Обработка и агрегация данных
│   ├── types/                # TypeScript типы
│   │   └── index.ts          # Определения интерфейсов
│   ├── main.tsx              # Точка входа
│   ├── App.css               # Глобальные стили
│   └── index.css             # Базовые стили
├── dist/                     # Собранное приложение
├── node_modules/             # Зависимости
├── .gitignore
├── eslint.config.js          # Конфигурация ESLint
├── index.html                # HTML шаблон
├── package.json              # Зависимости и скрипты
├── tsconfig.json             # Конфигурация TypeScript
├── tsconfig.app.json         # TypeScript для приложения
├── tsconfig.node.json        # TypeScript для Node.js
├── vite.config.ts            # Конфигурация Vite
└── README.md                 # Документация
```

### Архитектурные принципы

1. **Компонентная архитектура**
   - Разделение на переиспользуемые компоненты
   - Изолированные стили через CSS Modules
   - Props-based коммуникация между компонентами

2. **Управление состоянием**
   - React Hooks (useState, useEffect, useMemo)
   - Локальное состояние в корневом компоненте App
   - Мемоизация вычислений для оптимизации производительности

3. **Обработка данных**
   - Разделение логики обработки данных в утилиты
   - Трансформация сырых данных в формат для Recharts
   - Агрегация данных по неделям

4. **Типизация**
   - Строгая типизация всех компонентов и функций
   - Интерфейсы для всех структур данных
   - Type-safe props и state

## Установка и запуск

### Установка зависимостей

```bash
# Клонируйте репозиторий
git clone <repository-url>
cd ab-test-chart

# Установите зависимости
npm install
```

### Запуск в режиме разработки

```bash
# Запустить dev-сервер
npm run dev
```

Приложение будет доступно по адресу: `http://localhost:5173/ab-test-chart/`

Dev-сервер поддерживает:
- Hot Module Replacement (HMR) - мгновенное обновление при изменении кода
- Быстрый старт (обычно < 1 секунды)
- Подробные сообщения об ошибках

### Проверка кода

```bash
# Запустить линтер
npm run lint
```

### Preview собранного приложения

```bash
# Собрать и запустить preview
npm run build
npm run preview
```

## Сборка и деплой

### Сборка для production

```bash
# Создать production build
npm run build
```

Результат сборки:
- Минифицированные JS и CSS файлы
- Оптимизированные изображения
- Source maps для отладки
- Файлы в директории `dist/`

### Деплой на GitHub Pages

1. **Настройка репозитория**

Обновите `package.json`:
```json
{
  "homepage": "https://<your-username>.github.io/<repository-name>"
}
```

Обновите `vite.config.ts`:
```typescript
export default defineConfig({
  base: '/<repository-name>/',
})
```

2. **Деплой**

```bash
# Автоматическая сборка и деплой
npm run deploy
```

Эта команда:
- Выполнит `npm run build`
- Создаст ветку `gh-pages` (если не существует)
- Загрузит содержимое `dist/` в ветку `gh-pages`
- Опубликует на GitHub Pages

3. **Настройка GitHub Pages**

- Перейдите в Settings → Pages
- Source: Deploy from a branch
- Branch: `gh-pages` / `root`
- Сохраните настройки

Приложение будет доступно по адресу: `https://<your-username>.github.io/<repository-name>/`

## Разработка

Проект создан с использованием современных практик разработки:
- Строгая типизация TypeScript
- Компонентная архитектура React
- CSS Modules для изоляции стилей
- ESLint для контроля качества кода
- Vite для быстрой разработки

---
